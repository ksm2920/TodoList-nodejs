<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App</title>
    <link rel="stylesheet" href="style/edit.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&display=swap" rel="stylesheet">
</head>
<body>
    <div class="todo-box">
        <h2>To-Do List</h2>
        <div class="todo-content">
            <form action="/" method="post" class="todo-input">
                <input type="text" name="task">
                <button type="submit"><span class="fas fa-plus"></span></button>
            </form>
            <div class="sort">
                <a href="/?page=<%=(dataToShow/dataToShowPerPage)%>&&sorted=-1">Newest</a>
                <a href="/?page=<%=(dataToShow/dataToShowPerPage)%>&&sorted=1">Oldest</a>
            </div>
            <div class="list">  
                <ul class="todo-list">
                    <% data.forEach(details => { %>
                        <% if (details._id == id) { %>
                            <li class="todo-list-item">
                                <form action="/edit/<%= details._id %>" method="post">
                                    <input type="text" value="<%= details.task %>" name="task">
                                    <button type="submit"><i class="fas fa-check"></i></button>
                                    <a href="/?page=<%=(dataToShow/dataToShowPerPage)%>" class="cancel"><i class="fas fa-undo-alt"></i></a>
                                </form>
                         </li>
                        <% } else { %>
                            <li class="todo-list-item">
                                <div class="todo-list-item-name"><%= details.task %></div>
                                <a href="/edit/<%= details._id %>?page=<%=(dataToShow/dataToShowPerPage)%>" class="edit"> <span class="fas fa-pen"></span>
                                </a>
                                <a href="/remove/<%= details._id %>" class="remove"> <span class="fas fa-times"></span>
                                </a>
                            </li>
                        <% } %>
                    <% }) %>
                </ul>
            </div> 
        </div>
        <% if(totalDataPart !== dataToShow/dataToShowPerPage) { %>

            <a href="/?page=<%=(dataToShow/dataToShowPerPage)+1%>">
            Show more
            </a>
        <% } else { %>
            <a href="/?page=1">
            Show less
            </a>

        <% } %>
    </div>
</body>
</html>
